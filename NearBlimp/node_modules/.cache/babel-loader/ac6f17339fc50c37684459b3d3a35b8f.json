{"ast":null,"code":"var _jsxFileName = \"/Users/albisourous/Desktop/HackTX-2022/NearBlimp/src/Flights.js\";\nimport React, { useState, useEffect } from 'react';\nimport InfoGrid from \"./Component/InfoGrid\";\nimport INFO_TYPES from './Constants/enum';\nimport './setup.css';\nimport './Component/load.scss';\nimport './Component/loader.css';\nimport Pagination from \"./Component/Pagination.js\";\nimport axios from 'axios';\nimport './Component/Search.css';\nimport { makeStyles } from '@material-ui/core/styles';\nimport TextField from '@material-ui/core/TextField';\nimport Grid from '@material-ui/core/Grid';\nimport SearchIcon from '@material-ui/icons/Search';\nimport CloseIcon from '@material-ui/icons/Close';\nimport SortByAlphaIcon from '@material-ui/icons/SortByAlpha';\nconst useStyles = makeStyles(theme => ({\n  searchBar: {\n    margin: theme.spacing(1),\n    color: 'white'\n  },\n  searchBarText: {\n    color: 'primary',\n    size: 'medium'\n  },\n  root: {\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n    '& > *': {\n      margin: theme.spacing(1)\n    }\n  }\n}));\n\nfunction GetSortOrder(prop, ord) {\n  return function (a, b) {\n    if (ord === 1) {\n      if (a[prop] > b[prop]) {\n        return 1;\n      } else if (a[prop] < b[prop]) {\n        return -1;\n      }\n\n      return 0;\n    } else {\n      if (a[prop] < b[prop]) {\n        return 1;\n      } else if (a[prop] > b[prop]) {\n        return -1;\n      }\n\n      return 0;\n    }\n  };\n}\n\nconst Flights = props => {\n  let order = 1;\n  const [flights, setFlights] = useState([]);\n  const [isLoading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [currentPage, setCurrentPage] = useState(1);\n  const [postsPerPage] = useState(15);\n  const [query, setQuery] = useState('');\n  const [message, setMessage] = useState('');\n  const [temp, setTemp] = useState([]);\n  const classes = useStyles();\n  useEffect(() => {\n    //TODO change back\n    setLoading({\n      isLoading: true\n    });\n    fetch('https://api-dot-naviaero.uc.r.appspot.com/api/flights').then(response => {\n      if (response.ok) {\n        return response.json();\n      } else {\n        throw new Error('Something went wrong...');\n      }\n    }).then(data => {\n      setFlights(data.flights);\n      setTemp(data.flights);\n      setLoading(false);\n    }).catch(error => {\n      setError(true);\n      setLoading(false);\n    });\n  }, []);\n\n  if (isLoading) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"loader hidden\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"svg\", {\n      className: \"svg-calLoader\",\n      xmlns: \"http://www.w3.org/2000/svg\",\n      width: \"230\",\n      height: \"230\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"path\", {\n      className: \"cal-loader__path\",\n      d: \"M86.429 40c63.616-20.04 101.511 25.08 107.265 61.93 6.487 41.54-18.593 76.99-50.6 87.643-59.46 19.791-101.262-23.577-107.142-62.616C29.398 83.441 59.945 48.343 86.43 40z\",\n      fill: \"none\",\n      stroke: \"#0099cc\",\n      \"stroke-width\": \"4\",\n      \"stroke-linecap\": \"round\",\n      \"stroke-linejoin\": \"round\",\n      \"stroke-dasharray\": \"10 10 10 10 10 10 10 432\",\n      \"stroke-dashoffset\": \"77\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(\"path\", {\n      className: \"cal-loader__plane\",\n      d: \"M141.493 37.93c-1.087-.927-2.942-2.002-4.32-2.501-2.259-.824-3.252-.955-9.293-1.172-4.017-.146-5.197-.23-5.47-.37-.766-.407-1.526-1.448-7.114-9.773-4.8-7.145-5.344-7.914-6.327-8.976-1.214-1.306-1.396-1.378-3.79-1.473-1.036-.04-2-.043-2.153-.002-.353.1-.87.586-1 .952-.139.399-.076.71.431 2.22.241.72 1.029 3.386 1.742 5.918 1.644 5.844 2.378 8.343 2.863 9.705.206.601.33 1.1.275 1.125-.24.097-10.56 1.066-11.014 1.032a3.532 3.532 0 0 1-1.002-.276l-.487-.246-2.044-2.613c-2.234-2.87-2.228-2.864-3.35-3.309-.717-.287-2.82-.386-3.276-.163-.457.237-.727.644-.737 1.152-.018.39.167.805 1.916 4.373 1.06 2.166 1.964 4.083 1.998 4.27.04.179.004.521-.076.75-.093.228-1.109 2.064-2.269 4.088-1.921 3.34-2.11 3.711-2.123 4.107-.008.25.061.557.168.725.328.512.72.644 1.966.676 1.32.029 2.352-.236 3.05-.762.222-.171 1.275-1.313 2.412-2.611 1.918-2.185 2.048-2.32 2.45-2.505.241-.111.601-.232.82-.271.267-.058 2.213.201 5.912.8 3.036.48 5.525.894 5.518.914 0 .026-.121.306-.27.638-.54 1.198-1.515 3.842-3.35 9.021-1.029 2.913-2.107 5.897-2.4 6.62-.703 1.748-.725 1.833-.594 2.286.137.46.45.833.872 1.012.41.177 3.823.24 4.37.085.852-.25 1.44-.688 2.312-1.724 1.166-1.39 3.169-3.948 6.771-8.661 5.8-7.583 6.561-8.49 7.387-8.702.233-.065 2.828-.056 5.784.011 5.827.138 6.64.09 8.62-.5 2.24-.67 4.035-1.65 5.517-3.016 1.136-1.054 1.135-1.014.207-1.962-.357-.38-.767-.777-.902-.893z\",\n      className: \"cal-loader__plane\",\n      fill: \"#000033\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 21\n      }\n    })));\n  }\n\n  if (error) {\n    return /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 16\n      }\n    }, error.message);\n  } //get current post\n\n\n  const indexOfLastPost = currentPage * postsPerPage;\n  const indexOfFirstPost = indexOfLastPost - postsPerPage;\n  const currentPosts = flights.slice(indexOfFirstPost, indexOfLastPost); //change page\n\n  const paginate = pageNumber => setCurrentPage(pageNumber);\n  /**\n       * Fetch the search results and update the state with the result.\n       *\n       * @param {int} updatedPageNo Updated Page No.\n       * @param {String} query Search Query.\n       *\n       */\n\n\n  function fetchSearchResults(searchQuery) {\n    // By default the limit of results is 20\n    const searchUrl = `https://api-dot-naviaero.uc.r.appspot.com/api/flights/${searchQuery}`;\n    console.log(searchUrl);\n    axios.get(searchUrl).then(info => {\n      const resultNotFoundMsg = !info.data.flights.length ? 'There are no more search results. Please try a new search.' : '';\n      setMessage(resultNotFoundMsg);\n      setFlights(info.data.flights);\n      console.log(info.data.flights);\n    }).catch(error => {\n      if (axios.isCancel(error) || error) {\n        setMessage('Failed to fetch results.Please check network');\n      }\n\n      console.log(error);\n    });\n  }\n\n  ;\n\n  function handleOnInputChange() {\n    const input = document.getElementById(\"input-with-icon-grid\").value;\n    setQuery(input);\n    fetchSearchResults(input);\n  }\n\n  ;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"Flights\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"Search\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.searchBar,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    spacing: 1,\n    alignItems: \"flex-end\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(SearchIcon, {\n    className: \"icon\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 29\n    }\n  })), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(TextField, {\n    TextField: true,\n    color: \"primary\",\n    id: \"input-with-icon-grid\",\n    label: \"Enter a flight's departure or arrival...\",\n    onChange: handleOnInputChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 29\n    }\n  })), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(CloseIcon, {\n    className: \"icon\",\n    onClick: () => {\n      setFlights(temp);\n      document.getElementById(\"input-with-icon-grid\").value = null;\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 29\n    }\n  }))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sort\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row justify-content-end\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(SortByAlphaIcon, {\n    className: \"icon\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    className: \"btn btn-outline-light\",\n    onClick: () => {\n      let newFlights = [...flights];\n      newFlights.sort(GetSortOrder(\"arrival_airport\", order)); //TODO\n\n      order = order * -1;\n      setFlights(newFlights);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 21\n    }\n  }, \"Departure\"), /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 21\n    }\n  }, \"|\"), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    className: \"btn btn-outline-light\",\n    onClick: () => {\n      let newFlights = [...flights];\n      newFlights.sort(GetSortOrder(\"departure_airport\", order)); //TODO\n\n      order = order * -1;\n      setFlights(newFlights);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 21\n    }\n  }, \"Arrival\"), /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 21\n    }\n  }, \"|\"), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    className: \"btn btn-outline-light\",\n    onClick: () => {\n      let newFlights = [...flights];\n      newFlights.sort(GetSortOrder(\"flight_date\", order)); //TODO\n\n      order = order * -1;\n      setFlights(newFlights);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 21\n    }\n  }, \"Date\"))), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 220,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 220,\n      columnNumber: 18\n    }\n  })), /*#__PURE__*/React.createElement(InfoGrid, {\n    infoData: currentPosts,\n    infoCardType: INFO_TYPES.FLIGHTS,\n    query: query,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Pagination, {\n    postsPerPages: postsPerPage,\n    totalPosts: flights.length,\n    paginate: paginate,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 13\n    }\n  }));\n};\n\nFlights.propTypes = {};\nexport default Flights;","map":{"version":3,"sources":["/Users/albisourous/Desktop/HackTX-2022/NearBlimp/src/Flights.js"],"names":["React","useState","useEffect","InfoGrid","INFO_TYPES","Pagination","axios","makeStyles","TextField","Grid","SearchIcon","CloseIcon","SortByAlphaIcon","useStyles","theme","searchBar","margin","spacing","color","searchBarText","size","root","display","flexDirection","alignItems","GetSortOrder","prop","ord","a","b","Flights","props","order","flights","setFlights","isLoading","setLoading","error","setError","currentPage","setCurrentPage","postsPerPage","query","setQuery","message","setMessage","temp","setTemp","classes","fetch","then","response","ok","json","Error","data","catch","indexOfLastPost","indexOfFirstPost","currentPosts","slice","paginate","pageNumber","fetchSearchResults","searchQuery","searchUrl","console","log","get","info","resultNotFoundMsg","length","isCancel","handleOnInputChange","input","document","getElementById","value","newFlights","sort","FLIGHTS","propTypes"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\n\nimport InfoGrid from \"./Component/InfoGrid\";\nimport INFO_TYPES from './Constants/enum';\nimport './setup.css';\nimport './Component/load.scss'\nimport './Component/loader.css'\nimport Pagination from \"./Component/Pagination.js\";\n\nimport axios from 'axios';\nimport './Component/Search.css';\n\nimport { makeStyles } from '@material-ui/core/styles';\nimport TextField from '@material-ui/core/TextField';\nimport Grid from '@material-ui/core/Grid';\nimport SearchIcon from '@material-ui/icons/Search';\nimport CloseIcon from '@material-ui/icons/Close';\nimport SortByAlphaIcon from '@material-ui/icons/SortByAlpha';\n\nconst useStyles = makeStyles((theme) => ({\n    searchBar: {\n        margin: theme.spacing(1),\n        color: 'white',\n    },\n\n    searchBarText: {\n        color: 'primary',\n        size: 'medium',\n\n    },\n\n    root: {\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'center',\n        '& > *': {\n            margin: theme.spacing(1),\n        },\n    },\n}));\n\nfunction GetSortOrder(prop, ord) {\n    return function (a, b) {\n        if (ord === 1) {\n            if (a[prop] > b[prop]) {\n                return 1;\n            } else if (a[prop] < b[prop]) {\n                return -1;\n            }\n            return 0;\n        } else {\n            if (a[prop] < b[prop]) {\n                return 1;\n            } else if (a[prop] > b[prop]) {\n                return -1;\n            }\n            return 0;\n        }\n    }\n}\n\nconst Flights = props => {\n    let order = 1;\n    const [flights, setFlights] = useState([])\n    const [isLoading, setLoading] = useState(false);\n    const [error, setError] = useState(null);\n\n    const [currentPage, setCurrentPage] = useState(1);\n    const [postsPerPage] = useState(15);\n\n    const [query, setQuery] = useState('');\n    const [message, setMessage] = useState('');\n    const [temp, setTemp] = useState([]);\n    const classes = useStyles();\n\n    useEffect(() => { //TODO change back\n        setLoading({ isLoading: true });\n\n        fetch('https://api-dot-naviaero.uc.r.appspot.com/api/flights')\n            .then(response => {\n                if (response.ok) {\n                    return response.json()\n                } else {\n                    throw new Error('Something went wrong...');\n                }\n            })\n            .then(data => { setFlights(data.flights); setTemp(data.flights); setLoading(false) })\n            .catch(error => { setError(true); setLoading(false) });\n\n    }, []);\n\n    if (isLoading) {\n        return (\n            <div className=\"loader hidden\">\n                <svg className=\"svg-calLoader\" xmlns=\"http://www.w3.org/2000/svg\" width=\"230\" height=\"230\">\n                    <path className=\"cal-loader__path\"\n                        d=\"M86.429 40c63.616-20.04 101.511 25.08 107.265 61.93 6.487 41.54-18.593 76.99-50.6 87.643-59.46 19.791-101.262-23.577-107.142-62.616C29.398 83.441 59.945 48.343 86.43 40z\"\n                        fill=\"none\" stroke=\"#0099cc\" stroke-width=\"4\" stroke-linecap=\"round\" stroke-linejoin=\"round\"\n                        stroke-dasharray=\"10 10 10 10 10 10 10 432\" stroke-dashoffset=\"77\" />\n                    <path className=\"cal-loader__plane\"\n                        d=\"M141.493 37.93c-1.087-.927-2.942-2.002-4.32-2.501-2.259-.824-3.252-.955-9.293-1.172-4.017-.146-5.197-.23-5.47-.37-.766-.407-1.526-1.448-7.114-9.773-4.8-7.145-5.344-7.914-6.327-8.976-1.214-1.306-1.396-1.378-3.79-1.473-1.036-.04-2-.043-2.153-.002-.353.1-.87.586-1 .952-.139.399-.076.71.431 2.22.241.72 1.029 3.386 1.742 5.918 1.644 5.844 2.378 8.343 2.863 9.705.206.601.33 1.1.275 1.125-.24.097-10.56 1.066-11.014 1.032a3.532 3.532 0 0 1-1.002-.276l-.487-.246-2.044-2.613c-2.234-2.87-2.228-2.864-3.35-3.309-.717-.287-2.82-.386-3.276-.163-.457.237-.727.644-.737 1.152-.018.39.167.805 1.916 4.373 1.06 2.166 1.964 4.083 1.998 4.27.04.179.004.521-.076.75-.093.228-1.109 2.064-2.269 4.088-1.921 3.34-2.11 3.711-2.123 4.107-.008.25.061.557.168.725.328.512.72.644 1.966.676 1.32.029 2.352-.236 3.05-.762.222-.171 1.275-1.313 2.412-2.611 1.918-2.185 2.048-2.32 2.45-2.505.241-.111.601-.232.82-.271.267-.058 2.213.201 5.912.8 3.036.48 5.525.894 5.518.914 0 .026-.121.306-.27.638-.54 1.198-1.515 3.842-3.35 9.021-1.029 2.913-2.107 5.897-2.4 6.62-.703 1.748-.725 1.833-.594 2.286.137.46.45.833.872 1.012.41.177 3.823.24 4.37.085.852-.25 1.44-.688 2.312-1.724 1.166-1.39 3.169-3.948 6.771-8.661 5.8-7.583 6.561-8.49 7.387-8.702.233-.065 2.828-.056 5.784.011 5.827.138 6.64.09 8.62-.5 2.24-.67 4.035-1.65 5.517-3.016 1.136-1.054 1.135-1.014.207-1.962-.357-.38-.767-.777-.902-.893z\"\n                        className=\"cal-loader__plane\" fill=\"#000033\" />\n                </svg>\n            </div>\n        )\n    }\n\n    if (error) {\n        return <p>{error.message}</p>;\n    }\n\n    //get current post\n    const indexOfLastPost = currentPage * postsPerPage;\n    const indexOfFirstPost = indexOfLastPost - postsPerPage;\n    const currentPosts = flights.slice(indexOfFirstPost, indexOfLastPost);\n\n    //change page\n    const paginate = (pageNumber) => setCurrentPage(pageNumber);\n\n    /**\n         * Fetch the search results and update the state with the result.\n         *\n         * @param {int} updatedPageNo Updated Page No.\n         * @param {String} query Search Query.\n         *\n         */\n    function fetchSearchResults(searchQuery) {\n        // By default the limit of results is 20\n        const searchUrl = `https://api-dot-naviaero.uc.r.appspot.com/api/flights/${searchQuery}`;\n        console.log(searchUrl);\n\n        axios.get(searchUrl)\n            .then((info) => {\n                const resultNotFoundMsg = !info.data.flights.length ?\n                    'There are no more search results. Please try a new search.' :\n                    '';\n                setMessage(resultNotFoundMsg);\n                setFlights(info.data.flights);\n\n                console.log(info.data.flights);\n            })\n            .catch((error) => {\n                if (axios.isCancel(error) || error) {\n                    setMessage('Failed to fetch results.Please check network')\n                }\n                console.log(error)\n            });\n    };\n\n\n    function handleOnInputChange() {\n        const input = document.getElementById(\"input-with-icon-grid\").value;\n        setQuery(input);\n        fetchSearchResults(input);\n    };\n\n\n\n    return (\n        <div className=\"Flights\">\n\n            <div className=\"Search\">\n                <div className={classes.searchBar}>\n                    <Grid container spacing={1} alignItems=\"flex-end\">\n                        <Grid item>\n                            <SearchIcon className=\"icon\" />\n                        </Grid>\n                        <Grid item>\n\n                            <TextField\n                                TextField color='primary'\n                                id=\"input-with-icon-grid\"\n                                label=\"Enter a flight's departure or arrival...\"\n                                onChange={handleOnInputChange}\n                            />\n                        </Grid>\n\n                        <Grid item>\n                            <CloseIcon className=\"icon\" onClick={() => { setFlights(temp) \n                            document.getElementById(\"input-with-icon-grid\").value = null}} />\n                        </Grid>\n\n\n                    </Grid>\n                </div>\n            </div>\n\n\n\n\n            <div className=\"sort\">\n                <div className=\"row justify-content-end\">\n                    <SortByAlphaIcon className=\"icon\" />\n\n                    <button type=\"button\" className=\"btn btn-outline-light\" onClick={() => {\n                        let newFlights = [...flights];\n                        newFlights.sort(GetSortOrder(\"arrival_airport\", order)); //TODO\n                        order = order * -1;\n                        setFlights(newFlights);\n                    }}>Departure\n                    </button>\n                    <h1>|</h1>\n                    <button type=\"button\" className=\"btn btn-outline-light\" onClick={() => {\n                        let newFlights = [...flights];\n                        newFlights.sort(GetSortOrder(\"departure_airport\", order)); //TODO\n                        order = order * -1;\n                        setFlights(newFlights);\n                    }}>Arrival\n                    </button>\n                    <h1>|</h1>\n                    <button type=\"button\" className=\"btn btn-outline-light\" onClick={() => {\n                        let newFlights = [...flights];\n                        newFlights.sort(GetSortOrder(\"flight_date\", order)); //TODO\n                        order = order * -1;\n                        setFlights(newFlights);\n                    }}>Date\n                    </button>\n                </div>\n            </div>\n            <div><br /></div>\n            <InfoGrid infoData={currentPosts} infoCardType={INFO_TYPES.FLIGHTS} query={query}/>\n            <Pagination postsPerPages={postsPerPage} totalPosts={flights.length} paginate={paginate}>\n\n            </Pagination>\n        </div>\n    );\n};\n\nFlights.propTypes = {};\n\nexport default Flights;\n\n"]},"metadata":{},"sourceType":"module"}